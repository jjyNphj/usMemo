<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap 
	PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="Board">
	<typeAlias alias="board" type="com.twogether.usMemo.dto.Board" />
	<typeAlias alias="memberGrade" type="com.twogether.usMemo.dto.MemberGrade" />
	
	<resultMap id="getMemberGrade" class="memberGrade">
       <result property="num" column="num"/>
       <result property="bNum" column="bNum"/>
       <result property="memId" column="memId"/>
       <result property="grade" column="grade"/>
    </resultMap>

	

	<select id="getMemberGradeBymNum" parameterClass="String" resultMap="getMemberGrade">
		select * from memberGrade where memId=#memId#
	</select>

	<select id="getBoardNameBybNum" parameterClass="int" resultClass="String">
		select name from board where num=#bNum#
	</select>
	
	<insert id="addBoard" parameterClass="String">
			<!-- insert into board values(#bNum#,#name#) -->
			insert into board values(board_num_seq.nextval,#name#)			
	</insert>
	
	<insert id="addMemberGradeBybNum" parameterClass="memberGrade">
	    <selectKey keyProperty="bNum" resultClass="int">
	        select max(num) from board
	    </selectKey>
			insert into memberGrade values (memberGrade_num_seq.nextval,#bNum#,#memId#,'1')
	</insert>
<!-- 	<select id="getBoardNumById" parameterClass="int" resultClass="int">
	    	select * from memberGrade where memId=#memId#
			select count(*) from board where bNum=#bNum#
	</select>
	 -->

</sqlMap>
	
