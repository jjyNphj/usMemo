<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap 
	PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="List">
	<typeAlias alias="listDTO" type="com.twogether.usMemo.dto.ListDTO" />
	
	<resultMap id="ListMap" class="listDTO">
       <result property="num" column="num"/>
       <result property="bNum" column="bNum"/>
       <result property="location" column="location"/>
       <result property="name" column="name"/>
    </resultMap>

	<select id="getListByNum" parameterClass="int" resultMap="ListMap">
		select * from List where bNum=#bNum# Order by location asc 
	</select>
	
	<delete id="deleteListBybNum"  parameterClass="int" >
	    <!-- list.bNum=board.num이 같으면서 전달받은 bNum의 값이 board.num값과 같은 list의 행 모두 삭제  -->
	    delete from list where exists (select 1 from board where list.bNum = board.num and board.num=#bNum#)
	</delete>
	


</sqlMap>
	