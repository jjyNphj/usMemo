<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap 
	PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">
	
	<sqlMap namespace="Activity">
		<typeAlias alias="member" type="com.twogether.usMemo.dto.Member"/>
		<typeAlias alias="activity" type="com.twogether.usMemo.dto.Activity"/>
		
		<resultMap id="activityMap" class="activity">
			<result property="num" column="num"/>
			<result property="activity_num" column="activity_num"/>
			<result property="memId" column="memId"/>
			<result property="bNum" column="bNum"/>
			<result property="write_time" column="write_time"/>
			<result property="value_num" column="value_num"/>
			<result property="value_string" column="value_string"/>
			<result property="to_num" column="to_num"/>
			<result property="from_num" column="from_num"/>
		</resultMap>
		
		<insert id="createBoard" parameterClass="activity">
			<selectKey keyProperty="activity_num" resultClass="int">
				select num from activity_format where activity_name='create_board'
			</selectKey>
			insert into activity values(activity_num_seq.nextval,#activity_num#,#memId#,#bNum#,sysdate,null,null,null,null)
		</insert>
		
		<select id="getAllActivity" parameterClass="int" resultMap="activityMap">
			select * from activity where bNum=#bNum# order by write_time
		</select>


	</sqlMap>
	